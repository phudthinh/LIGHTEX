@model LIGHTEX.Models.CommentViewModel;
@{
    ViewData["Title"] = "Cảm ơn";
    Layout = "_Layout";
}
@using Microsoft.AspNetCore.Authentication.Cookies
@using System.Security.Claims
@using LIGHTEX.Data
@using Microsoft.AspNetCore.Http
@using System.Diagnostics;
@using System.Globalization;
@using System.Linq;
@using Microsoft.EntityFrameworkCore;

@inject IHttpContextAccessor HttpContextAccessor
@{
}
<body>
    <div class="h-[90%] w-full m-4">
        <div class="text-xl flex flex-col justify-center items-center mt-5 md:mt-0">
            <h1 class="font-semibold text-3xl text[#333333] mt-10">Đánh giá sản phẩm</h1>
            <div class="py-4 px-6">
                <div class="flex justify-center items-center gap-20">
                    <div class="flex flex-col justify-center items-center">
                        <div class="mt-2 w-full flex gap-2 items-center">
                            <label>Sản phẩm:</label>
                            <p class="text-black font-semibold">@Model.product</p>
                        </div>
                        <div class="mt-2 w-full flex gap-2 items-center">
                            <label>Loại sản phẩm:</label>
                            <p class="text-black font-semibold">@Model.category</p>
                        </div>
                        <div class="mt-2 w-full flex gap-2 items-center">
                            <label>Nhãn hàng:</label>
                            <p class="text-black font-semibold">@Model.brand</p>
                        </div>
                    </div>
                    <div>
                        <img class="w-60 h-auto" src="data:image/png;base64,@(Convert.ToBase64String(Model.image))" alt="image" />
                    </div>
                </div>
            </div>
            <div>
            </div>
            <form method="post" action="@Url.Action("CommentSend", "Home")" enctype="multipart/form-data">
                <div class="mt-3 w-full">
                    <input type="hidden" placeholder="Mã" asp-for="id_bill" value="@Model.id_bill" readonly
                           class=" bg-gray-100 rounded-lg px-5 py-2 focus:border border-[#FF6827] focus:outline-none text-black placeholder:text-gray-600 placeholder:opacity-50 font-semibold w-full">
                </div>
                <div class="mt-3 w-full">
                    <div class="star-rating flex justify-center flex-row-reverse">
                        <input type="radio" id="star1" name="star" value="1" />
                      <label for="star1" title="1 star">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8 .753l2.34 4.773 5.227.76-3.78 3.686.893 5.2L8 12.347l-4.88 2.625.893-5.2L.433 6.286l5.227-.76L8 .753z"/>
                        </svg>
                      </label>

                      <input type="radio" id="star2" name="star" value="2" />
                      <label for="star2" title="2 stars">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8 .753l2.34 4.773 5.227.76-3.78 3.686.893 5.2L8 12.347l-4.88 2.625.893-5.2L.433 6.286l5.227-.76L8 .753z"/>
                        </svg>
                      </label>

                        <input type="radio" id="star3" name="star" value="3" />
                      <label for="star3" title="3 stars">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8 .753l2.34 4.773 5.227.76-3.78 3.686.893 5.2L8 12.347l-4.88 2.625.893-5.2L.433 6.286l5.227-.76L8 .753z"/>
                        </svg>
                      </label>

                        <input type="radio" id="star4" name="star" value="4" />
                      <label for="star4" title="4 stars">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8 .753l2.34 4.773 5.227.76-3.78 3.686.893 5.2L8 12.347l-4.88 2.625.893-5.2L.433 6.286l5.227-.76L8 .753z"/>
                        </svg>
                      </label>

                      <input type="radio" id="star5" name="star" value="5" />
                      <label for="star5" title="5 stars">
                        <svg width="1em" height="1em" viewBox="0 0 16 16" class="bi bi-star-fill" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
                          <path d="M8 .753l2.34 4.773 5.227.76-3.78 3.686.893 5.2L8 12.347l-4.88 2.625.893-5.2L.433 6.286l5.227-.76L8 .753z"/>
                        </svg>
                      </label>
                    </div>
                </div>
                <div class="mt-3 w-full">
                    <textarea type="text" cols="0" rows="4" placeholder="Mô tả" asp-for="content"
                              class="bg-gray-100 rounded-lg px-5 py-2 focus:border border-[#FF6827] focus:outline-none text-black placeholder:text-gray-600 placeholder:opacity-50 font-semibold w-full h-48"></textarea>
                </div>
                @if (ViewBag.ErrorMessage != null)
                {
                    <p class="mt-4 text-[#FF0000] text-center">@ViewBag.ErrorMessage</p>
                }
                <div class="text-center mt-7">
                    <button type="submit" class="uppercase px-24 md:px-[118px] lg:px-[140px] py-2 rounded-md text-white bg-[#FF6827] hover:bg-[#FF6827]/[.9] font-medium">
                        Đánh giá
                    </button>
                </div>
            </form>
        </div>
    </div>
    <script>
  const stars = document.querySelectorAll('.star');

  function setStars(num) {
    for (let i = 0; i < stars.length; i++) {
      if (i < num) {
        stars[i].classList.remove('text-gray-400');
        stars[i].classList.add('text-yellow-500');
      } else {
        stars[i].classList.remove('text-yellow-500');
        stars[i].classList.add('text-gray-400');
      }
    }
  }

  stars.forEach((star, i) => {
    star.addEventListener('mouseover', () => {
      setStars(i+1);
    });

    star.addEventListener('mouseout', () => {
      setStars(0);
    });

    star.addEventListener('click', () => {
      setStars(i+1);
      // save selected number of stars to hidden input field
      document.querySelector('#num-stars').value = i+1;
    });
  });
</script>
</body>